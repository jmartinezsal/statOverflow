extends layout.pug

block content
    div.wrapper(id=`question-container-${question.id}`)
        div.questionUser
            div.username= question.User.username
            br
            img(src=question.User.avatarImage)
        div.question
            h1= title
            div.text #{question.content}
            br
            a(href=`#` id=`${question.id}` class="button answerBtn") Add Answer
            div#newAnswer
            script(src="/javascripts/answers.js")
        each answer in answers

            div(class=`question-answer-${question.id}` id=`${answer.id}` )
                div.questionUser
                    div.username= answer.User.username
                    img(src=answer.User.avatarImage)
                div.question(id=`${question.id}`)
                    form(class="hidden" id=`edit-form-${answer.id}` action=`/question/${question.id}/answer/edit/${answer.id}` method="put")
                        textarea(name="answer" id=`answer-${answer.id}`)
                        br
                        a(href="#" class="button" id=`submit-${answer.id}`) Accept
                        a(href="#" class="button" id=`cancel-${answer.id}`) Cancel
                    div(class=`answer-${answer.id}`).text= answer.answer
                    if(userId === answer.User.id)
                        a(id=`${question.id}-${answer.id}` class="button editBtn") Edit
                        a(class="button deleteBtn") Delete
            div(class="questionUser hidden" id="userImg")
                div.username= user.username
                img(src=user.avatarImage)
            div(class="answerForm question-answer-${question.id}")
                form(method="post" class="hidden" id="answerForm" action=`/question/${question.id}/answer/add`)
                    textarea(name="answer" id="answer")
                    br
                    div(class="submit")
                        a(class="button addBtn" id=`${question.id}`) Accept
                        a(class="button") Cancel
